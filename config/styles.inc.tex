\pgfplotsset{compat=newest}

% http://tex.stackexchange.com/questions/287975/pgfplots-layer-issue
\pgfplotsset{
/pgfplots/layers/mylayer/.define layer set=
{axis background,axis grid,pre main,main,axis ticks,axis lines,axis tick labels,axis descriptions,axis foreground}
{/pgfplots/layers/standard}
}
\pgfplotsset{/dummy/workaround/.style={/pgfplots/axis on top}}

\pgfplotsset{tick style={black!30},grid style={black!10}}
\pgfplotsset{every axis legend/.append style={font=\footnotesize}}
\pgfplotsset{every axis label/.append style={font=\footnotesize}}
\pgfplotsset{every tick label/.append style={font=\footnotesize}}
\pgfplotsset{every axis title/.append style={at={(0.5,1.025)}}}
\pgfplotsset{every axis/.append style={set layers=mylayer, /dummy/workaround}}
\pgfplotsset{every axis post/.style={unbounded coords=jump, line join=round}}

%http://tex.stackexchange.com/questions/18152/how-can-i-adjust-the-horizontal-spacing-between-legend-entries-in-pgfplots
\pgfplotsset{legendAbovePlot/.style={legend style={at={(0.5,1.025)},anchor={south},nodes=right,legend columns=-1,font=\footnotesize,draw=none,/tikz/every even column/.append style={column sep=1em}}}}

% style to plot only every Nth point (1st, N+1st, ...)
% use as: `mark repeat=N`
% http://tex.stackexchange.com/questions/116690/pgfplots-marks-mandatory-for-1st-and-last-point
\pgfplotsset{
    mark repeat*/.style={
        scatter,
        scatter src=x,
        scatter/@pre marker code/.code={
            \pgfmathtruncatemacro\usemark{
                or(mod(\coordindex,#1)==0, (\coordindex==(\numcoords-1))
            }
            \ifnum\usemark=0
                \pgfplotsset{mark=none}
            \fi
        },
        scatter/@post marker code/.code={}
    }
}

\pgfplotsset{slopegrid/.style={
  mark phase=2,mark repeat=1,samples=2,mark=text,
  color={black!15},forget plot,
  text mark style={}
}}

%% Number formatting
\pgfset{number format/1000 sep={\,}}

%% Colors
  \colorlet{meas}{TangoPlum2}

  \colorlet{goallight}{TangoChameleon1}
  \colorlet{goal}{TangoChameleon2}
  \colorlet{goaldark}{TangoChameleon3}

  \colorlet{obtainedlight}{TangoScarletRed1}
  \colorlet{obtained}{TangoScarletRed2}
  \colorlet{obtaineddark}{TangoScarletRed3}

  \colorlet{model}{TangoAluminium5}
  \colorlet{bg}{TangoAluminium2}

\colorlet{model}{black}
\colorlet{truesys}{TangoAluminium5}
\colorlet{frf}{truesys}

\colorlet{linms}{TangoSkyBlue3}
\colorlet{logms}{TangoChameleon2}
\colorlet{qlogms}{TangoPlum3}
\colorlet{clogms}{TangoScarletRed3}
\colorlet{plogms}{TangoOrange3}

\colorlet{sigmalinms}{linms}
\colorlet{sigmaqlogms}{qlogms}
\colorlet{sigmaclogms}{clogms}

\colorlet{biaslinms}{TangoSkyBlue1}
\colorlet{biasqlogms}{TangoPlum1}
\colorlet{biasclogms}{TangoScarletRed1}

\colorlet{dbacolor}{TangoScarletRed2}
\colorlet{dbbcolor}{TangoSkyBlue2}
\colorlet{dbccolor}{TangoChameleon2}
\colorlet{dbdcolor}{TangoOrange2}

\definecolor{compen}{rgb}{0.729,0.741,0.714}
\colorlet{signal}{TangoSkyBlue2}
\colorlet{misalign}{TangoScarletRed2}

\colorlet{first}{TangoScarletRed2}
\colorlet{second}{TangoOrange2}
\colorlet{third}{TangoChameleon3}
\colorlet{fourth}{TangoSkyBlue3}
\colorlet{fifth}{TangoPlum1}
\colorlet{sixth}{TangoChocolate2}

\colorlet{LPMTrunc}{TangoSkyBlue2}
\colorlet{LPMTruncInit}{TangoSkyBlue2}
\colorlet{RFIR}{TangoScarletRed3}
\colorlet{RFIRInit}{TangoScarletRed1}
\colorlet{existing}{TangoChameleon3}
\colorlet{G0Hat}{TangoOrange2}
\colorlet{GVXI}{G0Hat}
\colorlet{reference}{black}

\colorlet{heuristic}{TangoPlum2}
\colorlet{observed}{TangoOrange3}

\colorlet{best}{TangoAluminium6}

\colorlet{G0HatFill}{TangoOrange1}
\colorlet{GVXIFill}{G0HatFill}
\colorlet{LPMTruncFill}{TangoSkyBlue1}
\colorlet{RFIRFill}{TangoScarletRed1}
\colorlet{existingFill}{TangoChameleon1}
\colorlet{bestFill}{TangoAluminium3}

\colorlet{FRFMean}{TangoPlum3}
\colorlet{FRFSingle}{TangoPlum1}
\colorlet{FRFNoise}{TangoChocolate1}

\colorlet{LRM}{TangoScarletRed3}
\colorlet{LPM}{TangoSkyBlue2}
\colorlet{SA}{TangoChameleon2}

\colorlet{validation}{TangoChameleon2}

\colorlet{LPMshade}{TangoSkyBlue1}
\colorlet{LRMshade}{TangoScarletRed1}
\colorlet{refColor}{TangoAluminium6}

\colorlet{param}{TangoScarletRed2}

  \colorlet{bwfill}{TangoAluminium1}
  \colorlet{bwline}{TangoAluminium5}

  \colorlet{noisefill}{TangoAluminium1}
  \colorlet{noiseline}{TangoAluminium5}

\colorlet{etfe}{TangoButter3}
\colorlet{lrm7111}{TangoPlum2}
\colorlet{lric7222}{TangoChameleon3}
\colorlet{lrm7222}{TangoSkyBlue3}
\colorlet{lrm6222}{TangoSkyBlue1}
\colorlet{lpm744}{TangoScarletRed3}

%% Marker sizes
\pgfplotsset{mediummarkers/.append style={mark size=1pt}}
\pgfplotsset{smallmarkers/.append style={mark size=0.75pt}}
\pgfplotsset{medsmallmarkers/.append style={mark size=0.5pt}}
\pgfplotsset{tinymarkers/.append style={mark size=0.25pt}}
\pgfplotsset{extremelytinymarkers/.append style={mark size=0.05pt}}

%% TikZ styles
  \tikzset{obtainedarrow/.style={color=obtaineddark,line width=1.0pt,->}}
  \tikzset{goalarrow/.style={color=goaldark,line width=1.0pt,->}}
  \tikzset{arrow/.style={color=TangoAluminium5,line width=1pt,->,>={triangle 45}}}

%% pgfplots styles
\pgfplotsset{goal/.style={color=goallight,dashed,line width=0.75pt}}
\pgfplotsset{obtained/.style={color=obtainedlight,line width=0.75pt}}

\pgfplotsset{signalrectangle/.style={fill=signal!60!black,fill opacity=0.8,color=signal!30}}
\pgfplotsset{signalrectanglerobust/.style={fill=signal!50,fill opacity=0.5,color=signal!30}}

\tikzset{showdistance/.style={|-|,line width=1pt}}

\pgfplotsset{frf/.style={color=black,solid,line width=1pt}}
\pgfplotsset{bw/.style={fill=bwfill,draw=bwline,opacity=0.75,area legend}}
\pgfplotsset{noiselevel/.style={fill=noisefill,draw=noiseline,opacity=0.75,area legend}}
\pgfplotsset{signal/.style={ycomb,color=signal,solid,line width=1pt}}
\pgfplotsset{signalhighlight/.style={ycomb,color=signal,solid,line width=1pt,mark=o,mark size=2pt}}

\pgfplotsset{compen/.style={fill,fill opacity=0.65,color=compen,smooth,forget plot}}
\pgfplotsset{truesys/.style={color=truesys,line width=1pt}}
\pgfplotsset{mainsys/.style={color=black,line width=1pt}}
\pgfplotsset{model/.style={color=model,dashed,line width=1.0pt}}

\pgfplotsset{meas/.style={color=meas,only marks,mark=*,mark options={solid},mark size=1pt}}

\pgfplotsset{dbvariance/.style={solid,line width=1.0pt}}
\pgfplotsset{dbvariancemin/.style={dashed,line width=1.0pt}}
\pgfplotsset{dbvariancemax/.style={dbvariance}}

\pgfplotsset{dbavar/.style={color=dbacolor,dbvariance}}
\pgfplotsset{dbbvar/.style={color=dbbcolor,dbvariance}}
\pgfplotsset{dbcvar/.style={color=dbccolor,dbvariance}}
\pgfplotsset{dbdvar/.style={color=dbdcolor,dbvariance}}

\pgfplotsset{dbamin/.style={color=dbacolor,dbvariancemin}}
\pgfplotsset{dbbmin/.style={color=dbbcolor,dbvariancemin}}
\pgfplotsset{dbcmin/.style={color=dbccolor,dbvariancemin}}
\pgfplotsset{dbdmin/.style={color=dbdcolor,dbvariancemin}}

\pgfplotsset{dbamax/.style={color=dbacolor,dbvariancemax,mark=diamond*}}
\pgfplotsset{dbbmax/.style={color=dbbcolor,dbvariancemax,mark=*}}
\pgfplotsset{dbcmax/.style={color=dbccolor,dbvariancemax,mark=square*}}
\pgfplotsset{dbdmax/.style={color=dbdcolor,dbvariancemax,mark=triangle*}}

\pgfplotsset{linmsmarker/.style={mark=*,mark options={solid},mark size=1pt}}
\pgfplotsset{logmsmarker/.style={mark=pentagon*,mark options={solid},mark size=1pt}}
\pgfplotsset{clogmsmarker/.style={mark=triangle*,mark options={solid},mark size=1pt}}
\pgfplotsset{qlogmsmarker/.style={mark=square*,mark options={solid},mark size=1pt}}
\pgfplotsset{plogmsmarker/.style={mark=diamond*,mark options={solid},mark size=1pt}}

\pgfplotsset{model/.style={color=model,line width=1.0pt}}

\pgfplotsset{gridline/.style={ycomb,solid,line width=0.7pt,mark size=1pt},line legend}
\pgfplotsset{biggrid/.style={ycomb,solid,line width=1pt,mark size=1pt}}

\pgfplotsset{linmsgrid/.style={color=linms,gridline,linmsmarker}}
\pgfplotsset{logmsgrid/.style={color=logms,gridline,logmsmarker}}
\pgfplotsset{clogmsgrid/.style={color=clogms,gridline,clogmsmarker}}
\pgfplotsset{plogmsgrid/.style={color=plogms,gridline,plogmsmarker}}

% \pgfplotsset{results/.style={solid,line width=0.7pt}}
% \pgfplotsset{linmsres/.style={color=linms,results}}
% \pgfplotsset{qlogmsres/.style={color=qlogms,results}}
% \pgfplotsset{clogmsres/.style={color=clogms,results}}
% \pgfplotsset{plogmsres/.style={color=plogms,results}}

\pgfplotsset{measline/.style={solid,line width=0.7pt}}
\pgfplotsset{linmsmeas/.style={color=linms,measline}}
\pgfplotsset{qlogmsmeas/.style={color=qlogms,measline}}
\pgfplotsset{clogmsmeas/.style={color=clogms,measline}}
\pgfplotsset{plogmsmeas/.style={color=plogms,measline}}

\pgfplotsset{connectline/.style={solid,line width=1.0pt}}
\pgfplotsset{linmsconnect/.style={color=linms,connectline,linmsmarker}}
\pgfplotsset{logmsconnect/.style={color=logms,connectline,logmsmarker}}
\pgfplotsset{qlogmsconnect/.style={color=qlogms,connectline,qlogmsmarker}}
\pgfplotsset{clogmsconnect/.style={color=clogms,connectline,clogmsmarker}}
\pgfplotsset{plogmsconnect/.style={color=plogms,connectline,plogmsmarker}}

\pgfplotsset{sigmaline/.style={solid,line width=0.8pt}}
\pgfplotsset{sigmalinms/.append style={linms,sigmaline}}
\pgfplotsset{sigmaqlogms/.append style={qlogms,sigmaline}}
\pgfplotsset{sigmaclogms/.append style={clogms,sigmaline}}
\pgfplotsset{sigmaplogms/.append style={plogms,sigmaline}}

\pgfplotsset{biasline/.style={densely dotted}}
\pgfplotsset{biaslinms/.style={color=biaslinms,linmsmarker,biasline}}
\pgfplotsset{biasqlogms/.style={color=biasqlogms,qlogmsmarker,biasline}}
\pgfplotsset{biasclogms/.style={color=biasclogms,clogmsmarker,biasline}}
\pgfplotsset{biasplogms/.style={color=biasplogms,clogmsmarker,biasline}}


\pgfplotsset{linrect/.style={fill=linms,draw=linms,line width=1pt}}

\pgfplotsset{linms/.style={color=linms,solid,line width=0.5pt}}
\pgfplotsset{qlogms/.style={color=qlogms,solid,line width=0.5pt}}
\pgfplotsset{clogms/.style={color=clogms,solid,line width=0.5pt}}

%% MC LRM
\pgfplotsset{mcrmse/.style={dotted}}
\pgfplotsset{mcbias/.style={solid}}
\pgfplotsset{mcvar/.style={dashed}}
\pgfplotsset{mcnoise/.style={solid}}
\pgfplotsset{mcpress/.style={solid}}


%% Truncation
\colorlet{FSmooth}{TangoScarletRed3}
\colorlet{FSmoothLight}{TangoScarletRed2}
\colorlet{expFit}{TangoSkyBlue3}
\colorlet{expFitLight}{TangoSkyBlue2}
\colorlet{trunc}{clogms}

\pgfplotsset{FRFLPM/.style={color=LPM}}
\pgfplotsset{FRFtrunc/.style={color=trunc}}

\pgfplotsset{sigmaLPM/.style={sigmalinms}}
\pgfplotsset{sigmaTrunc/.style={sigmaplogms}}

\pgfplotsset{biasLPM/.style={biaslinms}}
\pgfplotsset{biasTrunc/.style={biasclogms}}

% adapted from xbar legend from pgfplots manual
\pgfplotsset{logHistogramLegend/.style={/pgfplots/legend image code/.code={%
            \draw[##1,/tikz/.cd,bar width=3pt,yshift=-0.2em,bar shift=0pt]
            plot coordinates {(0.15cm,0.6em) (0.3cm,0.8em) (0.45cm,0.6em)};}
}}
% adapted from line legend
\pgfplotsset{verticalLineLegend/.style={
  legend image code/.code={
    \draw[mark repeat=2,mark phase=2,##1]
      plot coordinates {
         (0.3cm, 0cm)
         (0.3cm, 0.25em)
         (0.3cm, 0.5em)
      };%
  }
}}

\colorlet{impulseResponseFull}{TangoScarletRed1!50!white}
\colorlet{impulseResponseAbs}{TangoChameleon1}
\colorlet{impulseResponseTruncated}{TangoChameleon3}
\colorlet{impulseResponsePeaks}{TangoScarletRed3}

\pgfplotsset{imprespFull/.style={color=impulseResponseFull,solid}}
\pgfplotsset{imprespAbs/.style={color=impulseResponseAbs,solid}}
\pgfplotsset{imprespExpFit/.style={color=expFit, solid, line width=1.5pt}}
\pgfplotsset{imprespPeaks/.style={color=TangoScarletRed3,mark=*,only marks,line width=1.25pt,mark size=0.5pt}}
\pgfplotsset{imprespTrunc/.style={color=impulseResponseTruncated,solid}}

\pgfplotsset{imprespDetectLevel/.style={color=black,dashed}}
\pgfplotsset{imprespNoiseLevel/.style={color=black,dashed}}

\pgfplotsset{truncationline/.style={dashdotdotted,line width=1.5pt,line join=round,line cap=round, verticalLineLegend}}

\pgfplotsset{logHistogram/.style={ycomb,line width=1.5pt,logHistogramLegend}}
\pgfplotsset{histogramSmootherFTest/.style={logHistogram,fill=FSmoothLight,draw=FSmoothLight}}
\pgfplotsset{histogramSmootherExpFit/.style={logHistogram,fill=expFitLight,draw=expFitLight,opacity=0.8}}

\pgfplotsset{mainCurve/.style={color=black,solid,line width=1.5pt}}
\pgfplotsset{pointOfInterest/.style={color=black,mark size=1.5pt,only marks,mark=*,mark options={solid}}}

\pgfplotsset{rmsOfSegment/.style={color=gray,line width=1pt,densely dotted}}

%% Initial values

\pgfplotsset{FRFMean/.style={color=FRFMean,mark=*,mark options={solid},only marks,medsmallmarkers}}
\pgfplotsset{FRFSingle/.style={color=FRFSingle,mark=square*,mark options={solid},only marks,smallmarkers}}
\pgfplotsset{FRFNoise/.style={color=FRFNoise,mark=x,mark options={solid},only marks,smallmarkers}}


\pgfplotsset{bandwidth/.style={area style,fill=TangoButter1,draw=TangoButter2,fill opacity=0.5}}
\pgfplotsset{goodestimate/.style={color=TangoChameleon2,line join=round}}
\pgfplotsset{badestimate/.style={color=TangoScarletRed2,solid,line join=round}}
\pgfplotsset{exact/.style={color=black,dashed,line width=0.75pt,line join=round}}

\pgfplotsset{LPMTruncmark/.append style={mark=*,mark options={solid}}}
\pgfplotsset{RFIRmark/.append style={mark=square*,mark options={solid}}}
\pgfplotsset{existingmark/.append style={mark=triangle*,mark options={solid}}}
\pgfplotsset{existingInitmark/.append style={mark=triangle,mark options={solid}}}
\pgfplotsset{LPMTruncInitmark/.append style={mark=o,mark options={solid}}}
\pgfplotsset{RFIRInitmark/.append style={mark=square,mark options={solid}}}
\pgfplotsset{bestmark/.append style={mark=diamond*,mark options={solid}}}
\pgfplotsset{G0Hatmark/.append style={mark=asterisk,mark options={solid}}}

\pgfplotsset{GVXI/.style={color=GVXI,line width=1pt}}
\pgfplotsset{G0Hat/.style={color=G0Hat,line width=1.5pt}}
\pgfplotsset{existing/.style={color=existing}}
\pgfplotsset{LPMTruncInit/.style={color=LPMTruncInit,densely dashed}}
\pgfplotsset{LPMTrunc/.style={color=LPMTrunc}}
\pgfplotsset{RFIRInit/.style={color=RFIRInit,densely dashed}}
\pgfplotsset{RFIR/.style={color=RFIR}}
\pgfplotsset{best/.style={color=best}}

\pgfplotsset{myDerivs/.style={color=black,solid,line width=1.0pt}}

\pgfplotsset{degradationBox/.style={area legend,solid,draw=none,fill=TangoOrange1,opacity=0.7}}
\pgfplotsset{degradationMedian/.style={color=TangoOrange3,solid,line width=2.0pt,opacity=0.7}}
\pgfplotsset{degradationMarks/.style={color=TangoScarletRed2,only marks,mark=triangle*,mark options={solid,fill=TangoScarletRed1,rotate=180},opacity=0.7}}

\pgfplotsset{enhancementBox/.style={area legend,solid,draw=none,fill=TangoSkyBlue1!80!white,opacity=0.7}}
\pgfplotsset{enhancementMedian/.style={color=TangoSkyBlue2,solid,line width=2.0pt,opacity=0.7}}
\pgfplotsset{enhancementMarks/.style={color=TangoChameleon3,only marks,mark=triangle*,mark options={solid,fill=TangoChameleon2},opacity=0.7}}

\pgfplotsset{percentileLines/.style={black,dashed}}
%NOTE: we need tikzset here, these styles are used on NODE (\in TikZ) instead of Pgfplots stuff
\tikzset{annotation/.style={align=left,draw=black!0.2,font=\scriptsize,fill=white,fill opacity=0.8}}
\tikzset{trace/.style={align=left,font=\scriptsize,fill opacity=0.8,fill=#1}}
\tikzset{trace/.default=white}

\tikzset{numSlope/.style={anchor=center,align=center,font=\scriptsize}}

%% LRM chapters

% \pgfplotsset{truesys/.style={color=truesys,densely dotted,line width=1.5pt}}
\pgfplotsset{frf/.style={color=frf,solid,mark options={solid},mark size=0.2pt}}

\pgfplotsset{hinfnorm/.style={dashed}}
\pgfplotsset{interpol/.style={sharp plot,solid,mark options={solid}}}

\pgfplotsset{LRMgrid/.style={color=LRM,mark size=1.5pt,only marks,mark=square*,mark options={solid}}}
\pgfplotsset{LPMgrid/.style={color=LPM,mark size=1.5pt,only marks,mark=*,mark options={solid}}}
\pgfplotsset{SAgrid/.style={color=SA,densely dotted,solid,mark=triangle*,mark size=1.5pt,mark options={solid}}}



\pgfplotsset{paramPhat/.style={color=param,solid,line width=1.2pt}}


\pgfplotsset{validation/.style={color=validation,densely dotted,mark=diamond*,mark size=1pt,mark options={solid}}}

\pgfplotsset{shaded/.style={opacity=0.5,area legend,solid}}

\pgfplotsset{LPMshade/.style={shaded,fill=LPMshade,draw=LPM}}
\pgfplotsset{LRMshade/.style={shaded,fill=LRMshade,draw=LRM}}

\pgfplotsset{reference/.append style={color=refColor,densely dotted,line width=0.75pt}}
\pgfplotsset{gammafrf/.style={color=black,mark=pentagon,mark options={solid}}}


%% interpolation figure
\pgfplotsset{continuous/.style={line width=0.75pt,mark options={solid},mark size=3pt}}
\pgfplotsset{first/.style={color=first,continuous}}
\pgfplotsset{second/.style={color=second,continuous}}
\pgfplotsset{third/.style={color=third,continuous}}
\pgfplotsset{fourth/.style={color=fourth,continuous}}
\pgfplotsset{fifth/.style={color=fifth,continuous}}
\pgfplotsset{sixth/.style={color=sixth,continuous}}

\pgfplotsset{range/.style={line width=0.75pt,mark options={solid},mark=|,mark size=2pt}}

\pgfplotsset{atGrid/.style={mark=*,mark size=1.5pt,only marks,mark options={solid}}}
\pgfplotsset{firstgrid/.style={atGrid,color=first}}
\pgfplotsset{secondgrid/.style={atGrid,color=second}}
\pgfplotsset{thirdgrid/.style={atGrid,color=third}}
\pgfplotsset{fourthgrid/.style={atGrid,color=fourth}}
\pgfplotsset{fifthgrid/.style={atGrid,color=fifth}}
\pgfplotsset{sixthgrid/.style={atGrid,color=sixth}}

%% TABLE STYLES
% http://tex.stackexchange.com/questions/83487/pgfplotstable-converting-zeros-to-in-a-knitr-inline-table

\pgfplotstableset{
	%zerofill=true,
	after row=[3pt],
         every head row/.style={before row=\toprule, after row={\\\midrule}},
         every last row/.style={after row=\bottomrule},
	assign column name/.code={%
        \pgfkeyssetvalue{/pgfplots/table/column name}{\multicolumn{1}{c}{\multirow{2}{*}{#1}} }%
    },
	columns/method/.style={string type,column name={\shortstack{\textsc{Method}\\\phantom{0}}}}, 
	columns/contribution/.style={column name={\textsc{Contribution}}},
	columns/P000/.style={column type=r,column name={\shortstack[r]{\textsc{Min.}\\{$0\%$}}}},
	columns/P025/.style={column type=r,column name={\shortstack[r]{\vphantom{?}\\\textsc{$25\%$}}}},
	columns/P050/.style={column type=r,column name={\shortstack[r]{\textsc{Median}\\{$50\%$}}}},
	columns/P075/.style={column type=r,column name={\shortstack[r]{\vphantom{?}\\\textsc{$75\%$ }}}},
	columns/P100/.style={column type=r,column name={\shortstack[r]{\textsc{Max.}\\{$100\%$}}}},
	columns/contribution/.style={column name={\shortstack[r]{\textsc{Contribution}\\ \vphantom{0}}},
	postproc cell content/.append code={
            %\ifnum1=\pgfplotstablepartno
                \pgfkeysalso{@cell content/.add={}{\%}}%
            %\fi
        },
	}
}
