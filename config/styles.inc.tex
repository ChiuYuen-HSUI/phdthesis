\pgfplotsset{compat=newest}

\pgfplotsset{tick style={black!30},grid style={black!10}}
\pgfplotsset{every axis legend/.append style={font=\footnotesize}}
\pgfplotsset{every axis label/.append style={font=\footnotesize}}
\pgfplotsset{every tick label/.append style={font=\footnotesize}}
\pgfplotsset{every axis title/.append style={at={(0.5,1.025)}}}
\pgfplotsset{every axis post/.style={unbounded coords=jump, line join=round}}

%http://tex.stackexchange.com/questions/18152/how-can-i-adjust-the-horizontal-spacing-between-legend-entries-in-pgfplots
\pgfplotsset{legendAbovePlot/.style={legend style={at={(0.5,1.025)},anchor={south},nodes=right,legend columns=-1,font=\footnotesize,draw=none,/tikz/every even column/.append style={column sep=1em}}}}

%TODO: avoid duplicated styles !!

%% Number formatting
\pgfset{number format/1000 sep={\,}}

%% Colors
  \definecolor{tangored}{named}{TangoScarletRed1}
  \definecolor{tangoblue}{rgb}{0.203922,0.396078,0.643137}
  \definecolor{tangogreen}{named}{TangoChameleon2}
  \definecolor{tangogrey}{named}{TangoAluminium5}

  \definecolor{meas}{named}{TangoPlum2}

  \definecolor{goallight}{named}{TangoChameleon1}
  \definecolor{goal}{named}{TangoChameleon2}
  \definecolor{goaldark}{named}{TangoChameleon3}

  \definecolor{obtainedlight}{named}{TangoScarletRed1}
  \definecolor{obtained}{named}{TangoScarletRed2}
  \definecolor{obtaineddark}{named}{TangoScarletRed3}

  \definecolor{model}{named}{tangogrey}
  \definecolor{bg}{named}{TangoAluminium2}

\definecolor{model}{named}{black}
\definecolor{truesys}{named}{TangoAluminium5}
% \definecolor{truesys}{named}{TangoAluminium4} % from LRMHinf paper

\definecolor{linms}{named}{TangoSkyBlue3}
\definecolor{logms}{named}{TangoChameleon2}
\definecolor{qlogms}{named}{TangoPlum3}
\definecolor{clogms}{named}{TangoScarletRed3}
\definecolor{plogms}{named}{TangoOrange3}

\definecolor{sigmalinms}{named}{linms}
\definecolor{sigmaqlogms}{named}{qlogms}
\definecolor{sigmaclogms}{named}{clogms}

\definecolor{biaslinms}{named}{TangoSkyBlue1}
\definecolor{biasqlogms}{named}{TangoPlum1}
\definecolor{biasclogms}{named}{TangoScarletRed1}

\definecolor{dbacolor}{named}{TangoScarletRed2}
\definecolor{dbbcolor}{named}{TangoSkyBlue2}
\definecolor{dbccolor}{named}{TangoChameleon2}
\definecolor{dbdcolor}{named}{TangoOrange2}

\definecolor{compen}{rgb}{0.729,0.741,0.714}
\definecolor{signal}{named}{TangoSkyBlue2}
\definecolor{misalign}{named}{TangoScarletRed2}

\definecolor{first}{named}{TangoScarletRed2}
\definecolor{second}{named}{TangoOrange2}
\definecolor{third}{named}{TangoChameleon3}
\definecolor{fourth}{named}{TangoSkyBlue3}
\definecolor{fifth}{named}{TangoPlum1}
\definecolor{sixth}{named}{TangoChocolate2}

\definecolor{LPMTrunc}{named}{TangoSkyBlue2}
\definecolor{LPMTruncInit}{named}{TangoSkyBlue2}
\definecolor{RFIR}{named}{TangoScarletRed3}
\definecolor{RFIRInit}{named}{TangoScarletRed1}
\definecolor{existing}{named}{TangoChameleon3}
\definecolor{G0Hat}{named}{TangoOrange2}
\definecolor{GVXI}{named}{G0Hat}
\definecolor{reference}{named}{black}

\definecolor{heuristic}{named}{TangoPlum2}
\definecolor{observed}{named}{TangoOrange3}

\definecolor{best}{named}{TangoAluminium6}

\definecolor{G0HatFill}{named}{TangoOrange1}
\definecolor{GVXIFill}{named}{G0HatFill}
\definecolor{LPMTruncFill}{named}{TangoSkyBlue1}
\definecolor{RFIRFill}{named}{TangoScarletRed1}
\definecolor{existingFill}{named}{TangoChameleon1}
\definecolor{bestFill}{named}{TangoAluminium3}

\definecolor{FRFMean}{named}{TangoPlum3}
\definecolor{FRFSingle}{named}{TangoPlum1}
\definecolor{FRFNoise}{named}{TangoChocolate1}

\definecolor{LRM}{named}{TangoScarletRed3}
\definecolor{LPM}{named}{TangoSkyBlue2}
\definecolor{SA}{named}{TangoChameleon2}

\definecolor{validation}{named}{TangoChameleon2}

\definecolor{LPMshade}{named}{TangoSkyBlue1}
\definecolor{LRMshade}{named}{TangoScarletRed1}
\definecolor{refColor}{named}{TangoAluminium6}

\definecolor{frf}{named}{TangoButter3} %TODO: replace
\definecolor{param}{named}{TangoScarletRed2}

  \definecolor{bwfill}{named}{TangoAluminium1}
  \definecolor{bwline}{named}{TangoAluminium5}

%% Marker sizes
\pgfplotsset{mediummarkers/.append style={mark size=1pt}}
\pgfplotsset{smallmarkers/.append style={mark size=0.75pt}}
\pgfplotsset{medsmallmarkers/.append style={mark size=0.5pt}}
\pgfplotsset{tinymarkers/.append style={mark size=0.25pt}}
\pgfplotsset{extremelytinymarkers/.append style={mark size=0.05pt}}

%% TikZ styles
  \tikzset{obtainedarrow/.style={color=obtaineddark,line width=1.0pt,->}}
  \tikzset{goalarrow/.style={color=goaldark,line width=1.0pt,->}}
  \tikzset{arrow/.style={color=TangoAluminium5,line width=1pt,->,>={triangle 45}}}

%% marker styles

%% pgfplots styles
\pgfplotsset{goal/.style={color=goallight,dashed,line width=0.75pt}}
\pgfplotsset{obtained/.style={color=obtainedlight,line width=0.75pt}}

\pgfplotsset{signalrectangle/.style={fill=signal!60!black,fill opacity=0.8,color=signal!30}}
\pgfplotsset{signalrectanglerobust/.style={fill=signal!50,fill opacity=0.5,color=signal!30}}

\tikzset{showdistance/.style={|-|,line width=1pt}}

\pgfplotsset{frf/.style={color=black,solid,line width=1pt}}
\pgfplotsset{bw/.style={fill=bwfill,draw=bwline,area legend}}
\pgfplotsset{signal/.style={ycomb,color=signal,solid,line width=1pt}}
\pgfplotsset{signalhighlight/.style={ycomb,color=signal,solid,line width=1pt,mark=o,mark size=2pt}}

\pgfplotsset{compen/.style={fill,fill opacity=0.65,color=compen,smooth,forget plot}}
\pgfplotsset{truesys/.style={color=tangogrey,line width=1pt}}
\pgfplotsset{mainsys/.style={color=black,line width=1pt}}
\pgfplotsset{model/.style={color=model,dashed,line width=1.0pt}}

\pgfplotsset{meas/.style={color=meas,only marks,mark=*,mark options={solid},mark size=1pt}}

\pgfplotsset{dbvariance/.style={solid,line width=1.0pt}}
\pgfplotsset{dbvariancemin/.style={dashed,line width=1.0pt}}
\pgfplotsset{dbvariancemax/.style={dbvariance}}

\pgfplotsset{dbavar/.style={color=dbacolor,dbvariance}}
\pgfplotsset{dbbvar/.style={color=dbbcolor,dbvariance}}
\pgfplotsset{dbcvar/.style={color=dbccolor,dbvariance}}
\pgfplotsset{dbdvar/.style={color=dbdcolor,dbvariance}}

\pgfplotsset{dbamin/.style={color=dbacolor,dbvariancemin}}
\pgfplotsset{dbbmin/.style={color=dbbcolor,dbvariancemin}}
\pgfplotsset{dbcmin/.style={color=dbccolor,dbvariancemin}}
\pgfplotsset{dbdmin/.style={color=dbdcolor,dbvariancemin}}

\pgfplotsset{dbamax/.style={color=dbacolor,dbvariancemax,mark=diamond*}}
\pgfplotsset{dbbmax/.style={color=dbbcolor,dbvariancemax,mark=*}}
\pgfplotsset{dbcmax/.style={color=dbccolor,dbvariancemax,mark=square*}}
\pgfplotsset{dbdmax/.style={color=dbdcolor,dbvariancemax,mark=triangle*}}

\pgfplotsset{linmsmarker/.style={mark=*,mark options={solid},mark size=1pt}}
\pgfplotsset{logmsmarker/.style={mark=pentagon*,mark options={solid},mark size=1pt}}
\pgfplotsset{clogmsmarker/.style={mark=triangle*,mark options={solid},mark size=1pt}}
\pgfplotsset{qlogmsmarker/.style={mark=square*,mark options={solid},mark size=1pt}}
\pgfplotsset{plogmsmarker/.style={mark=diamond*,mark options={solid},mark size=1pt}}

\pgfplotsset{model/.style={color=model,line width=1.0pt}}

\pgfplotsset{gridline/.style={ycomb,solid,line width=0.7pt,mark size=1pt}}
\pgfplotsset{biggrid/.style={ycomb,solid,line width=1pt,mark size=1pt}}

\pgfplotsset{linmsgrid/.style={color=linms,gridline,linmsmarker}}
\pgfplotsset{logmsgrid/.style={color=logms,gridline,logmsmarker}}
\pgfplotsset{clogmsgrid/.style={color=clogms,gridline,clogmsmarker}}
\pgfplotsset{plogmsgrid/.style={color=plogms,gridline,plogmsmarker}}


\pgfplotsset{results/.style={solid,line width=0.7pt}}
\pgfplotsset{linmsres/.style={color=linms,results}}
\pgfplotsset{qlogmsres/.style={color=qlogms,results}}
\pgfplotsset{clogmsres/.style={color=clogms,results}}
\pgfplotsset{plogmsres/.style={color=plogms,results}}

%TODO: change these styles?
\pgfplotsset{linmsmeas/.style={color=linms,solid,line width=0.7pt}}
\pgfplotsset{qlogmsmeas/.style={color=qlogms,solid,line width=0.7pt}}
\pgfplotsset{clogmsmeas/.style={color=clogms,solid,line width=0.7pt}}
\pgfplotsset{plogmsmeas/.style={color=plogms,solid,line width=0.7pt}}

\pgfplotsset{connectline/.style={solid,line width=1.0pt}}
\pgfplotsset{linmsconnect/.style={color=linms,connectline,linmsmarker}}
\pgfplotsset{qlogmsconnect/.style={color=qlogms,connectline,qlogmsmarker}}
\pgfplotsset{clogmsconnect/.style={color=clogms,connectline,clogmsmarker}}
\pgfplotsset{plogmsconnect/.style={color=plogms,connectline,plogmsmarker}}

\pgfplotsset{sigmaline/.style={solid,line width=0.8pt}}
\pgfplotsset{sigmalinms/.append style={linms,sigmaline}}
\pgfplotsset{sigmaqlogms/.append style={qlogms,sigmaline}}
\pgfplotsset{sigmaclogms/.append style={clogms,sigmaline}}
\pgfplotsset{sigmaplogms/.append style={plogms,sigmaline}}

\pgfplotsset{biasline/.style={densely dotted}}
\pgfplotsset{biaslinms/.style={color=biaslinms,linmsmarker,biasline}}
\pgfplotsset{biasqlogms/.style={color=biasqlogms,qlogmsmarker,biasline}}
\pgfplotsset{biasclogms/.style={color=biasclogms,clogmsmarker,biasline}}

\pgfplotsset{linrect/.style={fill=linms,draw=linms,line width=1pt}}

\pgfplotsset{linms/.style={color=linms,solid,line width=0.5pt}}
\pgfplotsset{qlogms/.style={color=qlogms,solid,line width=0.5pt}}
\pgfplotsset{clogms/.style={color=clogms,solid,line width=0.5pt}}

%% Initial values

\pgfplotsset{FRFMean/.style={color=FRFMean,mark=*,mark options={solid},only marks,medsmallmarkers}}
\pgfplotsset{FRFSingle/.style={color=FRFSingle,mark=square*,mark options={solid},only marks,smallmarkers}}
\pgfplotsset{FRFNoise/.style={color=FRFNoise,mark=x,mark options={solid},only marks,smallmarkers}}


\pgfplotsset{bandwidth/.style={area style,fill=TangoButter1,draw=TangoButter2,fill opacity=0.5}}
\pgfplotsset{goodestimate/.style={color=TangoChameleon2,line join=round}}
\pgfplotsset{badestimate/.style={color=TangoScarletRed2,solid,line join=round}}
\pgfplotsset{exact/.style={color=black,dashed,line width=0.75pt,line join=round}}

\pgfplotsset{LPMTruncmark/.append style={mark=*,mark options={solid}}}
\pgfplotsset{RFIRmark/.append style={mark=square*,mark options={solid}}}
\pgfplotsset{existingmark/.append style={mark=triangle*,mark options={solid}}}
\pgfplotsset{existingInitmark/.append style={mark=triangle,mark options={solid}}}
\pgfplotsset{LPMTruncInitmark/.append style={mark=o,mark options={solid}}}
\pgfplotsset{RFIRInitmark/.append style={mark=square,mark options={solid}}}
\pgfplotsset{bestmark/.append style={mark=diamond*,mark options={solid}}}
\pgfplotsset{G0Hatmark/.append style={mark=asterisk,mark options={solid}}}

\pgfplotsset{GVXI/.style={color=GVXI,line width=1pt}}
\pgfplotsset{G0Hat/.style={color=G0Hat,line width=1.5pt}}
\pgfplotsset{existing/.style={color=existing}}
\pgfplotsset{LPMTruncInit/.style={color=LPMTruncInit,densely dashed}}
\pgfplotsset{LPMTrunc/.style={color=LPMTrunc}}
\pgfplotsset{RFIRInit/.style={color=RFIRInit,densely dashed}}
\pgfplotsset{RFIR/.style={color=RFIR}}
\pgfplotsset{best/.style={color=best}}

\pgfplotsset{myDerivs/.style={color=black,solid,line width=1.0pt}}

\pgfplotsset{degradationBox/.style={area legend,solid,draw=none,fill=TangoOrange1,opacity=0.7}}
\pgfplotsset{degradationMedian/.style={color=TangoOrange3,solid,line width=2.0pt,opacity=0.7}}
\pgfplotsset{degradationMarks/.style={color=TangoScarletRed2,only marks,mark=triangle*,mark options={solid,fill=TangoScarletRed1,rotate=180},opacity=0.7}}

\pgfplotsset{enhancementBox/.style={area legend,solid,draw=none,fill=TangoSkyBlue1!80!white,opacity=0.7}}
\pgfplotsset{enhancementMedian/.style={color=TangoSkyBlue2,solid,line width=2.0pt,opacity=0.7}}
\pgfplotsset{enhancementMarks/.style={color=TangoChameleon3,only marks,mark=triangle*,mark options={solid,fill=TangoChameleon2},opacity=0.7}}

\pgfplotsset{percentileLines/.style={black,dashed}}
%NOTE: we need tikzset here, these styles are used on NODE (\in TikZ) instead of Pgfplots stuff
\tikzset{annotation/.style={align=left,draw=black!0.2,font=\scriptsize,fill=white,fill opacity=0.8}}

\tikzset{numSlope/.style={anchor=center,align=center,font=\scriptsize}}

%% LRM chapters

%TODO: redefine this thingie for LRM chapters
% \pgfplotsset{truesys/.style={color=truesys,densely dotted,line width=1.5pt}}

\pgfplotsset{hinfnorm/.style={dashed}}
\pgfplotsset{interpol/.style={sharp plot,solid,mark options={solid}}}

\pgfplotsset{LRMgrid/.style={color=LRM,mark size=1.5pt,only marks,mark=square*,mark options={solid}}}
\pgfplotsset{LPMgrid/.style={color=LPM,mark size=1.5pt,only marks,mark=*,mark options={solid}}}
\pgfplotsset{SAgrid/.style={color=SA,densely dotted,solid,mark=triangle*,mark size=1.5pt,mark options={solid}}}


\pgfplotsset{frf/.style={color=frf,solid,mark options={solid},mark size=0.2pt}} %TODO: replace

\pgfplotsset{paramPhat/.style={color=param,solid,line width=1.2pt}}


\pgfplotsset{validation/.style={color=validation,densely dotted,mark=diamond*,mark size=1pt,mark options={solid}}}

\pgfplotsset{shaded/.style={opacity=0.5,area legend,solid}}

\pgfplotsset{LPMshade/.style={shaded,fill=LPMshade,draw=LPM}}
\pgfplotsset{LRMshade/.style={shaded,fill=LRMshade,draw=LRM}}

\pgfplotsset{reference/.append style={color=refColor,densely dotted,line width=0.75pt}}
\pgfplotsset{gammafrf/.style={color=black,mark=pentagon,mark options={solid}}}


%% interpolation figure
\pgfplotsset{continuous/.style={line width=0.75pt,mark options={solid},mark size=3pt}}
\pgfplotsset{first/.style={color=first,continuous}}
\pgfplotsset{second/.style={color=second,continuous}}
\pgfplotsset{third/.style={color=third,continuous}}
\pgfplotsset{fourth/.style={color=fourth,continuous}}
\pgfplotsset{fifth/.style={color=fifth,continuous}}
\pgfplotsset{sixth/.style={color=sixth,continuous}}

\pgfplotsset{range/.style={line width=0.75pt,mark options={solid},mark=|,mark size=2pt}}

\pgfplotsset{atGrid/.style={mark=*,mark size=1.5pt,only marks,mark options={solid}}}
\pgfplotsset{firstgrid/.style={atGrid,color=first}}
\pgfplotsset{secondgrid/.style={atGrid,color=second}}
\pgfplotsset{thirdgrid/.style={atGrid,color=third}}
\pgfplotsset{fourthgrid/.style={atGrid,color=fourth}}
\pgfplotsset{fifthgrid/.style={atGrid,color=fifth}}
\pgfplotsset{sixthgrid/.style={atGrid,color=sixth}}

%% TABLE STYLES
% http://tex.stackexchange.com/questions/83487/pgfplotstable-converting-zeros-to-in-a-knitr-inline-table

\pgfplotstableset{
	%zerofill=true,
	after row=[3pt],
         every head row/.style={before row=\toprule, after row={\\\midrule}},
         every last row/.style={after row=\bottomrule},
	assign column name/.code={%
        \pgfkeyssetvalue{/pgfplots/table/column name}{\multicolumn{1}{c}{\multirow{2}{*}{#1}} }%
    },
	columns/method/.style={string type,column name={\shortstack{\textsc{Method}\\\phantom{0}}}}, 
	columns/contribution/.style={column name={\textsc{Contribution}}},
	columns/P000/.style={column type=r,column name={\shortstack[r]{\textsc{Min.}\\{$0\%$}}}},
	columns/P025/.style={column type=r,column name={\shortstack[r]{\vphantom{?}\\\textsc{$25\%$}}}},
	columns/P050/.style={column type=r,column name={\shortstack[r]{\textsc{Median}\\{$50\%$}}}},
	columns/P075/.style={column type=r,column name={\shortstack[r]{\vphantom{?}\\\textsc{$75\%$ }}}},
	columns/P100/.style={column type=r,column name={\shortstack[r]{\textsc{Max.}\\{$100\%$}}}},
	columns/contribution/.style={column name={\shortstack[r]{\textsc{Contribution}\\ \vphantom{0}}},
	postproc cell content/.append code={
            %\ifnum1=\pgfplotstablepartno
                \pgfkeysalso{@cell content/.add={}{\%}}%
            %\fi
        },
	}
}
